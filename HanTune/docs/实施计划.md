# æ±‰å…œäºŒæ¬¡å¼€å‘å®æ–½è®¡åˆ’

## é¡¹ç›®æ¦‚è¿°
åŸºäºç°æœ‰æ±‰å­—ç‰ˆWordleé¡¹ç›®è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œæ·»åŠ æ¸¸æˆæ¨¡å¼é€‰æ‹©åŠŸèƒ½ï¼Œæ”¯æŒæ¯æ—¥ä¸€é¢˜å’Œæ— å°½æ¨¡å¼ï¼ŒåŒæ—¶ä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚

## ä»»åŠ¡æ¸…å•

### é˜¶æ®µä¸€ï¼šåŸºç¡€æ¶æ„æ”¹é€ 
- [ ] 1.1 åˆ é™¤ä¸¥æ ¼æ¨¡å¼ç›¸å…³ä»£ç 
  - ç§»é™¤æ‰€æœ‰`useStrict`ç›¸å…³é€»è¾‘
  - æ¸…ç†ä¸¥æ ¼æ¨¡å¼ä¸‹çš„ç‰¹æ®Šå¤„ç†
  - ç®€åŒ–çŠ¶æ€ç®¡ç†é€»è¾‘

- [ ] 1.2 åˆ›å»ºæ¨¡å¼ç®¡ç†æ¨¡å—
  - æ–°å»º`src/logic/mode.ts`æ–‡ä»¶
  - å®ç°æ¨¡å¼åˆ‡æ¢é€»è¾‘
  - æ·»åŠ æ¨¡å¼çŠ¶æ€ç®¡ç†

- [ ] 1.3 åˆ›å»ºæ— å°½æ¨¡å¼å¼•æ“
  - æ–°å»º`src/logic/endless.ts`æ–‡ä»¶
  - å®ç°éšæœºæˆè¯­ç”Ÿæˆé€»è¾‘
  - æ·»åŠ è½®æ¬¡ç®¡ç†åŠŸèƒ½

### é˜¶æ®µäºŒï¼šæ•°æ®å±‚æ”¹é€ 
- [ ] 2.1 åˆ›å»ºéšæœºæˆè¯­ç”Ÿæˆå™¨
  - æ–°å»º`src/logic/randomIdiom.ts`æ–‡ä»¶
  - å®ç°æˆè¯­æ•°æ®åŠ è½½å’Œç¼“å­˜
  - æ·»åŠ å»é‡å’Œæ‰¹é‡ç”ŸæˆåŠŸèƒ½

- [ ] 2.2 ä¿®æ”¹æˆè¯­æ•°æ®æº
  - æ•´ç†ç°æœ‰æˆè¯­æ•°æ®
  - ç¡®ä¿æ•°æ®æ ¼å¼ä¸€è‡´æ€§
  - ä¼˜åŒ–æ•°æ®åŠ è½½æ€§èƒ½

### é˜¶æ®µä¸‰ï¼šç•Œé¢å±‚å¼€å‘
- [ ] 3.1 åˆ›å»ºæ¨¡å¼é€‰æ‹©ç»„ä»¶
  - æ–°å»º`src/components/GameModeSelector.vue`
  - è®¾è®¡æ¨¡å¼é€‰æ‹©ç•Œé¢
  - å®ç°æ¨¡å¼åˆ‡æ¢äº¤äº’

- [ ] 3.2 ä¿®æ”¹ä¸»åº”ç”¨ç»„ä»¶
  - æ›´æ–°`src/App.vue`
  - æ·»åŠ æ¨¡å¼é€‰æ‹©é€»è¾‘
  - å®ç°æ¡ä»¶æ¸²æŸ“

- [ ] 3.3 ä¿®æ”¹æ¸¸æˆä¸»ç»„ä»¶
  - æ›´æ–°`src/components/Play.vue`
  - æ·»åŠ æ— å°½æ¨¡å¼æ”¯æŒ
  - å®ç°å†æ¥ä¸€è¯åŠŸèƒ½

### é˜¶æ®µå››ï¼šåˆ†äº«åŠŸèƒ½ä¼˜åŒ–
- [ ] 4.1 ä¿®æ”¹åˆ†äº«ç»„ä»¶
  - ç§»é™¤å¾®åšå’Œæ¨ç‰¹åˆ†äº«é€‰é¡¹
  - ä¿ç•™å¾®ä¿¡å’Œå¤åˆ¶é“¾æ¥åŠŸèƒ½
  - ä¼˜åŒ–åˆ†äº«æ–‡æ¡ˆ

- [ ] 4.2 æ›´æ–°åˆ†äº«é€»è¾‘
  - é€‚é…ä¸åŒæ¨¡å¼çš„åˆ†äº«å†…å®¹
  - æ·»åŠ æ¨¡å¼æ ‡è¯†

### é˜¶æ®µäº”ï¼šé›†æˆæµ‹è¯•
- [ ] 5.1 åŠŸèƒ½é›†æˆæµ‹è¯•
  - æµ‹è¯•æ¨¡å¼åˆ‡æ¢æµç¨‹
  - éªŒè¯æ— å°½æ¨¡å¼é€»è¾‘
  - æ£€æŸ¥æ•°æ®ä¸€è‡´æ€§

- [ ] 5.2 ç”¨æˆ·ä½“éªŒæµ‹è¯•
  - ç•Œé¢å“åº”æ€§æµ‹è¯•
  - äº¤äº’æµç•…åº¦æµ‹è¯•
  - é”™è¯¯å¤„ç†æµ‹è¯•

- [ ] 5.3 æ€§èƒ½ä¼˜åŒ–
  - ä»£ç åˆ†å‰²ä¼˜åŒ–
  - æ‡’åŠ è½½å®ç°
  - å†…å­˜æ³„æ¼æ£€æŸ¥

## è¯¦ç»†å®æ–½æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡
```bash
# ç¡®ä¿é¡¹ç›®ç¯å¢ƒæ­£å¸¸
cd e:\myProjects_Trae\Wordle\handle-main
npm install
npm run dev
```

### ç¬¬äºŒæ­¥ï¼šåˆ é™¤ä¸¥æ ¼æ¨¡å¼
**ç›®æ ‡æ–‡ä»¶**: `src/storage.ts`
```typescript
// åˆ é™¤ä»¥ä¸‹ç›¸å…³ä»£ç 
const strictMode = useStorage('hanziwordle-strict', false)
export const useStrict = computed(() => strictMode.value)
```

**ç›®æ ‡æ–‡ä»¶**: `src/components/Play.vue`
```vue
<!-- åˆ é™¤ä¸¥æ ¼æ¨¡å¼ç›¸å…³æ¨¡æ¿ -->
<!-- åˆ é™¤ä¸¥æ ¼æ¨¡å¼åˆ‡æ¢æŒ‰é’® -->
```

### ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºæ ¸å¿ƒé€»è¾‘æ¨¡å—

#### 3.1 æ¨¡å¼ç®¡ç† (`src/logic/mode.ts`)
```typescript
import { ref, computed } from 'vue'

export type GameMode = 'daily' | 'endless'

const currentMode = ref<GameMode>('daily')

export function switchMode(mode: GameMode) {
  currentMode.value = mode
}

export const isDailyMode = computed(() => currentMode.value === 'daily')
export const isEndlessMode = computed(() => currentMode.value === 'endless')

export const currentGameMode = computed(() => currentMode.value)
```

#### 3.2 æ— å°½æ¨¡å¼å¼•æ“ (`src/logic/endless.ts`)
```typescript
import { ref, computed } from 'vue'
import { getRandomIdiom } from './randomIdiom'

// çŠ¶æ€å®šä¹‰
const endlessRound = ref(1)
const currentWord = ref('')
const currentTries = ref<string[]>([])
const isRoundFinished = ref(false)

// è®¡ç®—å±æ€§
export const endlessState = computed(() => ({
  round: endlessRound.value,
  word: currentWord.value,
  tries: currentTries.value,
  isFinished: isRoundFinished.value
}))

// åˆå§‹åŒ–å‡½æ•°
export function initEndlessMode() {
  startNewRound()
}

// å¼€å§‹æ–°è½®æ¬¡
export function startNewRound() {
  currentWord.value = getRandomIdiom()
  currentTries.value = []
  isRoundFinished.value = false
  endlessRound.value++
}

// æ·»åŠ å°è¯•
export function addEndlessTry(word: string) {
  currentTries.value.push(word)
  if (word === currentWord.value) {
    isRoundFinished.value = true
  }
}

// é‡ç½®å‡½æ•°
export function resetEndlessState() {
  endlessRound.value = 1
  currentWord.value = ''
  currentTries.value = []
  isRoundFinished.value = false
}
```

#### 3.3 éšæœºæˆè¯­ç”Ÿæˆå™¨ (`src/logic/randomIdiom.ts`)
```typescript
// åŸºäºç°æœ‰idioms.tsè¿›è¡Œæ‰©å±•
import { getAnswerOfDay } from '../answers'

let usedIdioms = new Set<string>()

export function getRandomIdiom(): string {
  // è·å–æ‰€æœ‰å¯ç”¨æˆè¯­
  const allIdioms = getAllAvailableIdioms()
  
  // è¿‡æ»¤å·²ä½¿ç”¨çš„æˆè¯­
  const availableIdioms = allIdioms.filter(idiom => !usedIdioms.has(idiom))
  
  // å¦‚æœæ‰€æœ‰æˆè¯­éƒ½ç”¨å®Œäº†ï¼Œé‡ç½®ä½¿ç”¨è®°å½•
  if (availableIdioms.length === 0) {
    usedIdioms.clear()
    return getRandomIdiom()
  }
  
  // éšæœºé€‰æ‹©ä¸€ä¸ªæˆè¯­
  const randomIndex = Math.floor(Math.random() * availableIdioms.length)
  const selectedIdiom = availableIdioms[randomIndex]
  
  // è®°å½•å·²ä½¿ç”¨
  usedIdioms.add(selectedIdiom)
  
  return selectedIdiom
}

function getAllAvailableIdioms(): string[] {
  // åŸºäºç°æœ‰æˆè¯­æ•°æ®ç”Ÿæˆå¯ç”¨åˆ—è¡¨
  // è¿™é‡Œéœ€è¦è®¿é—®ç°æœ‰çš„æˆè¯­æ•°æ®æº
  return []
}
```

### ç¬¬å››æ­¥ï¼šç•Œé¢ç»„ä»¶å¼€å‘

#### 4.1 æ¨¡å¼é€‰æ‹©ç»„ä»¶
```vue
<!-- src/components/GameModeSelector.vue -->
<template>
  <div class="mode-selector min-h-screen flex items-center justify-center">
    <div class="mode-cards grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto p-8">
      
      <!-- æ¯æ—¥ä¸€é¢˜æ¨¡å¼ -->
      <div class="mode-card daily-card cursor-pointer" @click="selectMode('daily')">
        <div class="card-icon text-6xl mb-4">ğŸ“…</div>
        <h2 class="text-2xl font-bold mb-2">æ¯æ—¥ä¸€é¢˜</h2>
        <p class="text-gray-600 mb-6">æ¯å¤©ä¸€ä¸ªæˆè¯­ï¼Œä¸å…¨çƒç©å®¶åŒæ­¥æŒ‘æˆ˜</p>
        <div class="features space-y-2">
          <div class="feature flex items-center">
            <span class="mr-2">âœ“</span>
            <span>æ¯æ—¥æ›´æ–°</span>
          </div>
          <div class="feature flex items-center">
            <span class="mr-2">âœ“</span>
            <span>å…¨çƒåŒæ­¥</span>
          </div>
          <div class="feature flex items-center">
            <span class="mr-2">âœ“</span>
            <span>å†å²è®°å½•</span>
          </div>
        </div>
      </div>
      
      <!-- æ— å°½æ¨¡å¼ -->
      <div class="mode-card endless-card cursor-pointer" @click="selectMode('endless')">
        <div class="card-icon text-6xl mb-4">â™¾ï¸</div>
        <h2 class="text-2xl font-bold mb-2">æ— å°½æ¨¡å¼</h2>
        <p class="text-gray-600 mb-6">è¿ç»­æŒ‘æˆ˜ï¼Œä¸æ–­çªç ´è‡ªæˆ‘æé™</p>
        <div class="features space-y-2">
          <div class="feature flex items-center">
            <span class="mr-2">âœ“</span>
            <span>æ— é™æŒ‘æˆ˜</span>
          </div>
          <div class="feature flex items-center">
            <span class="mr-2">âœ“</span>
            <span>å³æ—¶åé¦ˆ</span>
          </div>
          <div class="feature flex items-center">
            <span class="mr-2">âœ“</span>
            <span>è¿ç»­è®°å½•</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { defineEmits } from 'vue'
import { switchMode } from '~/logic/mode'

const emit = defineEmits<{
  modeSelected: [mode: 'daily' | 'endless']
}>()

function selectMode(mode: 'daily' | 'endless') {
  switchMode(mode)
  emit('modeSelected', mode)
}
</script>

<style scoped>
.mode-card {
  @apply bg-white dark:bg-gray-800 rounded-xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 border-2 border-transparent hover:border-primary;
}

.daily-card:hover {
  @apply border-blue-500;
}

.endless-card:hover {
  @apply border-green-500;
}
</style>
```

#### 4.2 ä¸»åº”ç”¨ç»„ä»¶ä¿®æ”¹
```vue
<!-- App.vue ä¿®æ”¹éƒ¨åˆ† -->
<template>
  <main font-sans text="center gray-700 dark:gray-300" select-none>
    <!-- æ¨¡å¼é€‰æ‹© -->
    <GameModeSelector 
      v-if="!modeSelected" 
      @mode-selected="handleModeSelected" 
    />
    
    <!-- æ¸¸æˆå†…å®¹ -->
    <template v-else>
      <NotTodayBanner v-if="dayNo < daySince && isDailyMode" />
      <Navbar />
      <div p="4">
        <NoQuizToday v-if="!answer.word && isDailyMode" />
        <NoFuturePlay v-else-if="dayNo > daySince && !isDev && isDailyMode" />
        <NoPastPlay v-else-if="daySince - dayNo > DAYS_PLAY_BACK && !isDev && isDailyMode" />
        <Play v-else :mode="currentMode" @round-complete="handleRoundComplete" />
      </div>
      <ModalsLayer />
      <Confetti />
    </template>
  </main>
</template>

<script setup lang="ts">
// æ–°å¢å¯¼å…¥
import { ref } from 'vue'
import { currentMode, isDailyMode } from '~/logic/mode'
import { initEndlessMode } from '~/logic/endless'

// æ–°å¢çŠ¶æ€
const modeSelected = ref(false)

// æ–°å¢æ–¹æ³•
function handleModeSelected(mode: 'daily' | 'endless') {
  modeSelected.value = true
  if (mode === 'endless') {
    initEndlessMode()
  }
}

function handleRoundComplete() {
  // å¤„ç†è½®æ¬¡å®Œæˆé€»è¾‘
}
</script>
```

### ç¬¬äº”æ­¥ï¼šåˆ†äº«åŠŸèƒ½ä¿®æ”¹

#### 5.1 åˆ†äº«ç»„ä»¶ä¿®æ”¹
```vue
<!-- ShareButton.vue ä¿®æ”¹éƒ¨åˆ† -->
<template>
  <div class="share-buttons">
    <!-- ä¿ç•™å¾®ä¿¡åˆ†äº« -->
    <button v-if="wechat" @click="shareToWechat" class="share-btn wechat">
      å¾®ä¿¡åˆ†äº«
    </button>
    
    <!-- ä¿ç•™å¤åˆ¶é“¾æ¥ -->
    <button @click="copyLink" class="share-btn copy">
      å¤åˆ¶é“¾æ¥
    </button>
    
    <!-- åˆ é™¤å¾®åšå’Œæ¨ç‰¹åˆ†äº« -->
    <!--
    <button v-if="weibo" @click="shareToWeibo" class="share-btn weibo">
      å¾®åšåˆ†äº«
    </button>
    <button v-if="twitter" @click="shareToTwitter" class="share-btn twitter">
      æ¨ç‰¹åˆ†äº«
    </button>
    -->
  </div>
</template>

<script setup lang="ts">
// åˆ é™¤å¾®åšå’Œæ¨ç‰¹ç›¸å…³æ–¹æ³•
// const shareToWeibo = () => { ... }
// const shareToTwitter = () => { ... }
</script>
```

## æ—¶é—´å®‰æ’

### ç¬¬ä¸€å‘¨ï¼šåŸºç¡€æ”¹é€ 
- ç¬¬1-2å¤©ï¼šåˆ é™¤ä¸¥æ ¼æ¨¡å¼ï¼Œæµ‹è¯•ç°æœ‰åŠŸèƒ½
- ç¬¬3-4å¤©ï¼šåˆ›å»ºæ¨¡å¼ç®¡ç†å’Œæ— å°½æ¨¡å¼å¼•æ“
- ç¬¬5-7å¤©ï¼šå®ç°éšæœºæˆè¯­ç”Ÿæˆå™¨

### ç¬¬äºŒå‘¨ï¼šç•Œé¢å¼€å‘
- ç¬¬1-3å¤©ï¼šå¼€å‘æ¨¡å¼é€‰æ‹©ç»„ä»¶
- ç¬¬4-5å¤©ï¼šä¿®æ”¹ä¸»åº”ç”¨ç»„ä»¶
- ç¬¬6-7å¤©ï¼šä¿®æ”¹æ¸¸æˆä¸»ç»„ä»¶

### ç¬¬ä¸‰å‘¨ï¼šåŠŸèƒ½å®Œå–„
- ç¬¬1-2å¤©ï¼šä¼˜åŒ–åˆ†äº«åŠŸèƒ½
- ç¬¬3-5å¤©ï¼šé›†æˆæµ‹è¯•å’Œbugä¿®å¤
- ç¬¬6-7å¤©ï¼šæ€§èƒ½ä¼˜åŒ–å’Œä»£ç æ¸…ç†

## é£é™©è¯„ä¼°ä¸åº”å¯¹

### æŠ€æœ¯é£é™©
1. **æˆè¯­æ•°æ®ä¸è¶³**ï¼šå®ç°å¾ªç¯ä½¿ç”¨æœºåˆ¶
2. **æ€§èƒ½é—®é¢˜**ï¼šé‡‡ç”¨æ‡’åŠ è½½å’Œç¼“å­˜ç­–ç•¥
3. **çŠ¶æ€ç®¡ç†å¤æ‚**ï¼šä½¿ç”¨æ¸…æ™°çš„çŠ¶æ€åˆ†å±‚

### æ—¶é—´é£é™©
1. **ä»»åŠ¡å»¶æœŸ**ï¼šé¢„ç•™ç¼“å†²æ—¶é—´ï¼Œä¼˜å…ˆæ ¸å¿ƒåŠŸèƒ½
2. **æµ‹è¯•ä¸å……åˆ†**ï¼šå¢åŠ è‡ªåŠ¨åŒ–æµ‹è¯•è¦†ç›–ç‡

### è´¨é‡é£é™©
1. **ç”¨æˆ·ä½“éªŒä¸ä½³**ï¼šå¤šè½®ç”¨æˆ·æµ‹è¯•å’Œåé¦ˆæ”¶é›†
2. **å…¼å®¹æ€§é—®é¢˜**ï¼šè·¨æµè§ˆå™¨å’Œè®¾å¤‡æµ‹è¯•

## éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶
- [ ] æ¨¡å¼é€‰æ‹©ç•Œé¢æ­£å¸¸æ˜¾ç¤ºå’Œåˆ‡æ¢
- [ ] æ¯æ—¥ä¸€é¢˜æ¨¡å¼ä¿æŒåŸæœ‰åŠŸèƒ½
- [ ] æ— å°½æ¨¡å¼æ”¯æŒè¿ç»­æŒ‘æˆ˜
- [ ] å†æ¥ä¸€è¯åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] åˆ†äº«åŠŸèƒ½åªæ˜¾ç¤ºå¾®ä¿¡å’Œå¤åˆ¶é“¾æ¥

### æ€§èƒ½éªŒæ”¶
- [ ] æ¨¡å¼åˆ‡æ¢å“åº”æ—¶é—´ < 500ms
- [ ] æˆè¯­åŠ è½½æ—¶é—´ < 1s
- [ ] ç•Œé¢æ¸²æŸ“æµç•…ï¼Œæ— å¡é¡¿

### ç”¨æˆ·ä½“éªŒéªŒæ”¶
- [ ] ç•Œé¢ç¾è§‚ï¼Œäº¤äº’æµç•…
- [ ] é”™è¯¯æç¤ºæ¸…æ™°å‹å¥½
- [ ] ç§»åŠ¨ç«¯é€‚é…è‰¯å¥½

## åç»­ä¼˜åŒ–

### çŸ­æœŸä¼˜åŒ–ï¼ˆ1ä¸ªæœˆå†…ï¼‰
- æ·»åŠ æ›´å¤šæˆè¯­æ•°æ®
- ä¼˜åŒ–éšæœºç®—æ³•é¿å…é‡å¤
- å¢åŠ æ¸¸æˆç»Ÿè®¡åŠŸèƒ½

### é•¿æœŸè§„åˆ’ï¼ˆ3ä¸ªæœˆå†…ï¼‰
- æ·»åŠ æ›´å¤šæ¸¸æˆæ¨¡å¼
- å®ç°ç”¨æˆ·ç³»ç»Ÿ
- æ·»åŠ ç¤¾äº¤åŠŸèƒ½

è¿™ä»½å®æ–½è®¡åˆ’ä¸ºäºŒæ¬¡å¼€å‘æä¾›äº†è¯¦ç»†çš„æ‰§è¡ŒæŒ‡å—å’Œæ—¶é—´å®‰æ’ã€‚